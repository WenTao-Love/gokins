(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-fbd13500","chunk-74ae09a0"],{3903:function(t,n,e){"use strict";e.r(n);var r=function(){var t=this,n=t._self._c;return n("div",[n("CCard",[n("CCardHeader",[n("CIcon",{attrs:{name:"cil-user"}}),t._v(" 用户管理 "),n("div",{staticClass:"card-header-actions"},[1==t.lginfo.permUser?n("CButton",{attrs:{size:"sm",color:"info",variant:"outline"},on:{click:function(n){t.newshow=!0}}},[t._v(" 新建用户 ")]):t._e()],1)],1),n("CCardBody",[n("CDataTable",{attrs:{hover:!0,striped:!0,border:!0,small:!0,fixed:!0,fields:t.fields,items:t.items},scopedSlots:t._u([{key:"aid",fn:function(e){var r=e.item;return[n("td",{staticStyle:{"text-align":"center"}},[t._v(" "+t._s(r.aid)+" ")])]}},{key:"name",fn:function(e){var r=e.item;return[n("td",{staticClass:"pthands",staticStyle:{color:"blue"},on:{click:function(n){return t.$router.push("/user/info/".concat(r.aid))}}},[t._v(" "+t._s(r.name)+" ")])]}},{key:"nick",fn:function(e){var r=e.item;return[n("td",{staticClass:"pthands",staticStyle:{color:"blue"},on:{click:function(n){return t.$router.push("/user/info/".concat(r.aid))}}},[n("myavatar",{attrs:{src:r.avat,nick:r.nick,imgw:"18px"}})],1)]}},{key:"created",fn:function(e){var r=e.item;return[n("td",[t._v(" "+t._s(t.$dateFmt(r.created))+" ")])]}},{key:"active",fn:function(e){var r=e.item;return[n("td",[t._v(" "+t._s(1==r.active?"已激活":"未激活")+" ")])]}},{key:"btns",fn:function(e){var r=e.item;return[n("td",{staticClass:"py-2"},[n("CButton",{attrs:{color:"info",square:"",size:"sm"},on:{click:function(n){return t.$router.push("/user/info/".concat(r.aid))}}},[t._v(" 详细 ")]),1==t.lginfo.permUser?n("CButton",{staticStyle:{"margin-left":"10px"},attrs:{color:"warning",square:"",size:"sm"},on:{click:function(n){t.permSel=!0,t.permUid=r.id}}},[t._v(" 权限 ")]):t._e()],1)]}}])}),n("CPagination",{staticStyle:{float:"right"},attrs:{activePage:t.page,pages:t.pages},on:{"update:activePage":t.getList}})],1)],1),n("NewUser",{attrs:{shown:t.newshow},on:{"update:shown":function(n){t.newshow=n},subOk:function(n){return t.getList(t.page)}}}),n("SelUserPerm",{attrs:{shown:t.permSel,uid:t.permUid},on:{"update:shown":function(n){t.permSel=n}}})],1)},i=[],u=function(){var t=this,n=t._self._c;return n("CModal",{attrs:{title:"选择权限",size:"sm",show:t.shown},on:{"update:show":function(n){return t.$emit("update:shown",n)}},scopedSlots:t._u([{key:"footer",fn:function(){return[n("CButton",{attrs:{color:"warning",variant:"outline"},on:{click:function(n){return t.$emit("update:shown",!1)}}},[t._v("取消")]),n("CButton",{attrs:{color:"info",disabled:t.loading},on:{click:t.subFun}},[t._v("提交")])]},proxy:!0}])},[n("CInputCheckbox",{attrs:{label:"新建用户",checked:t.formData.permUser},on:{"update:checked":function(n){return t.$set(t.formData,"permUser",n)}}}),n("CInputCheckbox",{attrs:{label:"新建组织",checked:t.formData.permOrg},on:{"update:checked":function(n){return t.$set(t.formData,"permOrg",n)}}}),n("CInputCheckbox",{attrs:{label:"新建流水线",checked:t.formData.permPipe},on:{"update:checked":function(n){return t.$set(t.formData,"permPipe",n)}}})],1)},o=[],c=e("841cd"),a={props:{shown:Boolean,uid:String},watch:{shown:function(t){1==t&&(this.loading=!0,this.uid&&this.getInfo(this.uid))}},data:function(){return{user:{},uinfo:{},formData:{},loading:!1}},methods:{getInfo:function(t){var n=this;Object(c["ab"])(t).then((function(t){n.loading=!1,n.user=t.data.user,n.uinfo=t.data.info,n.formData={id:n.user.id,permUser:1==n.uinfo.permUser,permOrg:1==n.uinfo.permOrg,permPipe:1==n.uinfo.permPipe}})).catch((function(t){return Object(c["gb"])(n,t)}))},subFun:function(){var t=this;this.loading=!0,Object(c["db"])(this.formData).then((function(){t.$emit("update:shown",!1)})).catch((function(n){return Object(c["gb"])(t,n)}))}}},s=a,f=e("f900"),d=Object(f["a"])(s,u,o,!1,null,null,null),b=d.exports,l=function(){var t=this,n=t._self._c;return n("CModal",{attrs:{title:"新建用户",closeOnBackdrop:!1,show:t.shown},on:{"update:show":function(n){return t.$emit("update:shown",n)}},scopedSlots:t._u([{key:"footer",fn:function(){return[n("CButton",{attrs:{color:"warning",variant:"outline"},on:{click:function(n){return t.$emit("update:shown",!1)}}},[t._v("取消")]),n("CButton",{attrs:{color:"info",disabled:t.subing},on:{click:t.subFun}},[t._v("提交")])]},proxy:!0}])},[n("CInput",{attrs:{label:"用户名",placeholder:"请输入用户名(必填)"},model:{value:t.formData.name,callback:function(n){t.$set(t.formData,"name",n)},expression:"formData.name"}}),n("CInput",{attrs:{label:"昵称",placeholder:"请输入昵称(必填)"},model:{value:t.formData.nick,callback:function(n){t.$set(t.formData,"nick",n)},expression:"formData.nick"}}),n("CInput",{attrs:{label:"密码",placeholder:"请输入密码(必填)",type:"password"},model:{value:t.formData.pass,callback:function(n){t.$set(t.formData,"pass",n)},expression:"formData.pass"}}),n("div",{staticStyle:{"margin-top":"10px",color:"#b98a69"}},[t._v("小提示:新用户需要另外授权权限")])],1)},p=[],m={props:{shown:Boolean,perm:Object},watch:{shown:function(t){1==t&&(this.subing=!1,this.formData={name:"",nick:"",pass:""})}},data:function(){return{subing:!1,formData:{}}},methods:{subFun:function(){var t=this;this.formData.name?this.formData.nick?this.formData.pass?(this.subing=!0,Object(c["bb"])(this.formData).then((function(){t.$emit("update:shown",!1),t.$emit("subOk",!1)})).catch((function(n){return Object(c["gb"])(t,n,(function(n){t.subing=!1;var e=n.response?n.response.status:0;511==e&&t.$msgErr("用户名已存在")}))}))):this.$msgErr("密码必填"):this.$msgErr("昵称必填"):this.$msgErr("用户名必填")}}},g=m,h=Object(f["a"])(g,l,p,!1,null,null,null),v=h.exports,O=e("7150"),j={components:{myavatar:O["a"],NewUser:v,SelUserPerm:b},data:function(){return{fields:[{key:"aid",label:"编号",_style:"width:80px;text-align:center"},{key:"name",label:"用户名"},{key:"nick",label:"昵称"},{key:"created",label:"创建时间"},{key:"active",label:"状态"},{key:"btns",label:"操作",sorter:!1,filter:!1}],items:[],page:0,pages:0,newshow:!1,permSel:!1,permUid:""}},computed:{lginfo:function(){return this.$store.state.uinfo||{}}},mounted:function(){this.getList()},methods:{getList:function(t){var n=this;Object(c["cb"])({page:t}).then((function(t){n.page=t.data.page,n.pages=t.data.pages,n.items=t.data.data})).catch((function(t){return Object(c["gb"])(n,t)}))}}},k=j,w=Object(f["a"])(k,r,i,!1,null,null,null);n["default"]=w.exports},7150:function(t,n,e){"use strict";var r=function(){var t=this,n=t._self._c;return n("div",{staticClass:"users"},[n("div",{staticClass:"c-avatar avat",style:{width:t.imgw&&""!=t.imgw?t.imgw:"auto"}},[n("img",{staticClass:"c-avatar-img",attrs:{src:t.src&&""!=t.src?t.src:"/jjenkins/gokinsui/imgs/avatars/def.png"}})]),n("div",{staticClass:"nicks"},[t._v(t._s(t.nick))])])},i=[],u={props:{src:String,nick:String,imgw:String},data:function(){return{}}},o=u,c=(e("81a2"),e("f900")),a=Object(c["a"])(o,r,i,!1,null,"07836378",null);n["a"]=a.exports},"81a2":function(t,n,e){"use strict";e("ec34")},"841cd":function(t,n,e){"use strict";e.d(n,"r",(function(){return i})),e.d(n,"Y",(function(){return u})),e.d(n,"gb",(function(){return o})),e.d(n,"q",(function(){return c})),e.d(n,"cb",(function(){return a})),e.d(n,"bb",(function(){return s})),e.d(n,"ab",(function(){return f})),e.d(n,"eb",(function(){return d})),e.d(n,"fb",(function(){return b})),e.d(n,"Z",(function(){return l})),e.d(n,"db",(function(){return p})),e.d(n,"u",(function(){return m})),e.d(n,"v",(function(){return g})),e.d(n,"t",(function(){return h})),e.d(n,"D",(function(){return v})),e.d(n,"A",(function(){return O})),e.d(n,"z",(function(){return j})),e.d(n,"B",(function(){return k})),e.d(n,"C",(function(){return w})),e.d(n,"w",(function(){return C})),e.d(n,"x",(function(){return y})),e.d(n,"E",(function(){return _})),e.d(n,"R",(function(){return $})),e.d(n,"l",(function(){return D})),e.d(n,"G",(function(){return I})),e.d(n,"y",(function(){return x})),e.d(n,"s",(function(){return S})),e.d(n,"F",(function(){return U})),e.d(n,"S",(function(){return B})),e.d(n,"L",(function(){return P})),e.d(n,"J",(function(){return E})),e.d(n,"I",(function(){return F})),e.d(n,"m",(function(){return z})),e.d(n,"k",(function(){return L})),e.d(n,"K",(function(){return V})),e.d(n,"V",(function(){return q})),e.d(n,"o",(function(){return J})),e.d(n,"H",(function(){return M})),e.d(n,"T",(function(){return N})),e.d(n,"n",(function(){return H})),e.d(n,"ib",(function(){return T})),e.d(n,"hb",(function(){return A})),e.d(n,"Q",(function(){return G})),e.d(n,"O",(function(){return K})),e.d(n,"M",(function(){return Q})),e.d(n,"N",(function(){return R})),e.d(n,"P",(function(){return W})),e.d(n,"c",(function(){return X})),e.d(n,"b",(function(){return Y})),e.d(n,"a",(function(){return Z})),e.d(n,"e",(function(){return tt})),e.d(n,"d",(function(){return nt})),e.d(n,"g",(function(){return et})),e.d(n,"f",(function(){return rt})),e.d(n,"i",(function(){return it})),e.d(n,"h",(function(){return ut})),e.d(n,"j",(function(){return ot})),e.d(n,"W",(function(){return ct})),e.d(n,"U",(function(){return at})),e.d(n,"p",(function(){return st})),e.d(n,"X",(function(){return ft}));var r=e("a474"),i=function(t,n){return Object(r["b"])("/lg/login",{name:t,pass:n})},u=function(){return Object(r["b"])("/lg/info",{})},o=function(t,n,e){var r=n.response?n.response.status:0;if(403==r)return t.$store.commit("clearUserInfo"),void t.$router.push("/login");var i=!1;e&&"function"===typeof e&&(i=e(n,t)),1!=i&&(404==r?t.$msgErr("未找到内容"):405==r?t.$msgErr("无权限"):t.$msgErr(n.response?n.response.data||"服务器错误":"网络错误"))},c=function(){return Object(r["b"])("/version")},a=function(t){return Object(r["b"])("/user/page",t)},s=function(t){return Object(r["b"])("/user/new",t)},f=function(t){return Object(r["b"])("/user/info",{id:t})},d=function(t){return Object(r["b"])("/user/upinfo",t)},b=function(t){return Object(r["b"])("/user/upass",t)},l=function(t,n){return Object(r["b"])("/user/active",{id:t,act:n})},p=function(t){return Object(r["b"])("/user/perm",t)},m=function(t){return Object(r["b"])("/org/list",t)},g=function(t){return Object(r["b"])("/org/new",t)},h=function(t){return Object(r["b"])("/org/info",{id:t})},v=function(t){return Object(r["b"])("/org/users",{id:t})},O=function(t){return Object(r["b"])("/org/save",t)},j=function(t){return Object(r["b"])("/org/rm",{id:t})},k=function(t){return Object(r["b"])("/org/user/edit",t)},w=function(t,n){return Object(r["b"])("/org/user/rm",{id:t,uid:n})},C=function(t,n){return Object(r["b"])("/org/pipe/add",{id:t,pipeId:n})},y=function(t,n){return Object(r["b"])("/org/pipe/rm",{id:t,pipeId:n})},_=function(t){return Object(r["b"])("/org/vars",t)},$=function(t){return Object(r["b"])("org/var/save",t)},D=function(t){return Object(r["b"])("/org/var/del",t)},I=function(t){return Object(r["b"])("/pipeline/pipelines",t)},x=function(t){return Object(r["b"])("/pipeline/org/pipelines",t)},S=function(t){return Object(r["b"])("/pipeline/new",t)},U=function(t){return Object(r["b"])("/pipeline/info",t)},B=function(t){return Object(r["b"])("/pipeline/save",t)},P=function(t){return Object(r["b"])("/pipeline/run",t)},E=function(t){return Object(r["b"])("/pipeline/pipelineVersions",t)},F=function(t){return Object(r["b"])("/pipeline/pipelineVersion",{id:t})},z=function(t){return Object(r["b"])("/pipeline/delete",{id:t})},L=function(t){return Object(r["b"])("/pipeline/copy",{pipelineId:t})},V=function(t){return Object(r["b"])("/pipeline/rebuild",{pipelineVersionId:t})},q=function(t){return Object(r["b"])("/pipeline/search/sha",t)},J=function(t){return Object(r["b"])("/pipelineVersion/delete",{id:t})},M=function(t){return Object(r["b"])("/pipeline/vars",t)},N=function(t){return Object(r["b"])("pipeline/var/save",t)},H=function(t){return Object(r["b"])("/pipeline/var/del",t)},T=function(){return Object(r["b"])("/yml/templates")},A=function(){return Object(r["b"])("/yml/plugins")},G=function(t){return Object(r["b"])("/runtime/stages",{pvId:t})},K=function(t){return Object(r["b"])("/runtime/cmds",{stepId:t})},Q=function(t){return Object(r["b"])("/runtime/build",{buildId:t})},R=function(t){return Object(r["b"])("/runtime/cancel",{buildId:t})},W=function(t,n,e){return Object(r["b"])("/runtime/logs",{buildId:t,stepId:n,offset:e})},X=function(t){return Object(r["b"])("/art/org-list",t)},Y=function(t){return Object(r["b"])("/art/info",{id:t})},Z=function(t){return Object(r["b"])("/art/edit",t)},tt=function(t){return Object(r["b"])("/art/rm",{id:t})},nt=function(t){return Object(r["b"])("/art/package/list",t)},et=function(t){return Object(r["b"])("/art/version/list",t)},rt=function(t){return Object(r["b"])("/art/version/infos",{id:t})},it=function(t){return Object(r["b"])("/art/version/save",t)},ut=function(t){return Object(r["b"])("/art/version/rm",{id:t})},ot=function(t,n){return Object(r["b"])("/art/version/url",{id:t,path:n})},ct=function(t){return Object(r["b"])("/trigger/triggers",t)},at=function(t){return Object(r["b"])("/trigger/save",t)},st=function(t){return Object(r["b"])("/trigger/delete",{id:t})},ft=function(t){return Object(r["b"])("/trigger/runs",t)}},ec34:function(t,n,e){}}]);
//# sourceMappingURL=chunk-fbd13500.f1039ac4.js.map